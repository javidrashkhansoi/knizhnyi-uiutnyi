/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/script.js":
/*!**************************!*\
  !*** ./src/js/script.js ***!
  \**************************/
/***/ (function() {

eval("\r\n// ? Constants\r\n//\r\n// ? Media\r\n//\r\nconst MAX_WIDTH_992PX = matchMedia(\"(max-width: 992px)\");\r\nconst MAX_WIDTH_480PX = matchMedia(\"(max-width: 480px)\");\r\n//\r\n// ? Forms\r\nconst forms = document.forms;\r\n//\r\n//\r\n// ? Events\r\n//\r\n// ? Window events\r\naddEventListener(\"resize\", resize);\r\n//\r\n// ? Document events\r\n//\r\ndocument.addEventListener(\"DOMContentLoaded\", domContentLoaded);\r\ndocument.addEventListener(\"click\", click);\r\ndocument.addEventListener(\"keydown\", keydown);\r\n//\r\n// ? Media events\r\nMAX_WIDTH_992PX.addEventListener(\"change\", maxWidth992pxEvent);\r\nMAX_WIDTH_480PX.addEventListener(\"change\", maxWidth480pxEvent);\r\n//\r\n// ? Form events\r\nif (forms.length) {\r\n  const headerActionForm = forms[\"form-actions-header\"];\r\n  const searchForm = forms[\"form-search-header\"];\r\n  const searchInput = searchForm?.[\"form-search-header-search\"];\r\n\r\n  headerActionForm?.addEventListener(\"input\", input);\r\n  searchForm?.addEventListener(\"input\", input);\r\n  searchInput?.addEventListener(\"focus\", focus);\r\n}\r\n//\r\n//\r\n// ? Observers\r\n//\r\n// ? Header observer\r\nconst headerObserver = new IntersectionObserver(entries => {\r\n  entries.forEach(entry => {\r\n    entry.isIntersecting ? headerObserverAction(\"remove\") : headerObserverAction();\r\n    if (entry.isIntersecting) hideHeaderActions();\r\n  });\r\n});\r\n\r\nconst header = document.querySelector(\".header\");\r\nif (header) headerObserver.observe(header);\r\n//\r\n//\r\n// ? Functions\r\n//\r\n// ? Resize\r\nfunction resize() {\r\n  setAsideSliderHeight()\r\n}\r\n//\r\n// ? DOM Content Loaded\r\nfunction domContentLoaded() {\r\n  setAsideSliderHeight();\r\n  loadLocalStorageData();\r\n  clearBothAfterFloatingImages();\r\n}\r\n//\r\n// ? Load local storage data\r\nfunction loadLocalStorageData() {\r\n  if (localStorage.price) {\r\n    const priceCheckbox = forms?.[\"form-actions-header\"]?.[\"form-actions-header-price\"];\r\n    if (priceCheckbox) priceCheckbox.checked = true;\r\n\r\n    document.querySelectorAll(\".book-card__prices\")?.forEach(price => {\r\n      price.hidden = false;\r\n    });\r\n  }\r\n  if (localStorage.free) {\r\n    const freeCheckbox = forms?.[\"form-actions-header\"]?.[\"form-actions-header-free\"];\r\n    if (freeCheckbox) freeCheckbox.checked = true;\r\n\r\n    document.querySelectorAll(\".book-card\")?.forEach(card => {\r\n      const pricesBlock = card.querySelector(\".book-card__prices\");\r\n\r\n      card.hidden = !!pricesBlock;\r\n    });\r\n\r\n    const priceCheckbox = forms?.[\"form-actions-header\"]?.[\"form-actions-header-price\"];\r\n    priceCheckbox?.classList.add(\"disabled\");\r\n  }\r\n  if (localStorage.annotations) {\r\n    const annotationsCheckbox = forms?.[\"form-actions-header\"]?.[\"form-actions-header-annotation\"];\r\n    if (annotationsCheckbox) annotationsCheckbox.checked = true;\r\n\r\n    document.querySelectorAll(\".books\")?.forEach(block => {\r\n      block.classList.add(\"annotations\");\r\n      block?.style.setProperty(\"--books-grid\", MAX_WIDTH_480PX.matches ? \"250px\" : \"375px\");\r\n    });\r\n\r\n    document.querySelectorAll(\".book-card__text\")?.forEach(annotations => {\r\n      annotations.hidden = false;\r\n    });\r\n  }\r\n  if (localStorage.discount) {\r\n    const discountCheckbox = forms?.[\"form-actions-header\"]?.[\"form-actions-header-discount\"];\r\n    if (discountCheckbox) discountCheckbox.checked = true;\r\n\r\n    document.querySelectorAll(\".book-card\")?.forEach(card => {\r\n      const pricesBlock = card.querySelector(\".book-card__old-price\");\r\n\r\n      card.hidden = !pricesBlock;\r\n    });\r\n  }\r\n  if (localStorage.author) {\r\n    const authorCheckbox = forms?.[\"form-actions-header\"]?.[\"form-actions-header-author\"];\r\n    if (authorCheckbox) authorCheckbox.checked = true;\r\n\r\n    document.querySelectorAll(\".book-card__author\")?.forEach(author => {\r\n      author.hidden = false;\r\n    })\r\n  }\r\n  if (localStorage.bookname) {\r\n    const booknameCheckbox = forms?.[\"form-actions-header\"]?.[\"form-actions-header-bookname\"];\r\n    if (booknameCheckbox) booknameCheckbox.checked = true;\r\n\r\n    document.querySelectorAll(\".book-card__bookname\")?.forEach(bookname => {\r\n      bookname.hidden = false;\r\n    })\r\n  }\r\n  setAsideSliderHeight();\r\n}\r\n//\r\nfunction clearBothAfterFloatingImages() {\r\n  const floatingImages = document.querySelectorAll(\".blog-image_left, .blog-image_right\");\r\n\r\n  floatingImages?.forEach(floatingImage => {\r\n    const floatingImageParentElement = floatingImage.parentElement;\r\n\r\n    floatingImageParentElement?.classList.add(\"clear-both\");\r\n  });\r\n}\r\n//\r\n// ? click\r\nfunction click(event) {\r\n  if (event.target.closest(\".burger\")) {\r\n    showHeaderActions();\r\n  }\r\n  if (event.target.closest(\".actions-header__close\")) {\r\n    hideHeaderActions();\r\n  }\r\n  if (event.target.closest(\".book-card__button\")) {\r\n    addBookToBookBox(event);\r\n  }\r\n  if (event.target.closest(\".reviews-book-page__button\")) {\r\n    spoilerAction(event);\r\n  }\r\n  if (event.target.closest(\".book-card__remove\")) {\r\n    removeBookCard(event);\r\n  }\r\n  if (event.target.closest(\"[data-popup-target]\")) {\r\n    popupShow(event);\r\n  } else if (!event.target.closest(\"[data-popup-inner]\")) {\r\n    popupHide();\r\n  }\r\n  if (event.target.closest(\"[data-popup-close]\")) {\r\n    popupHide();\r\n  }\r\n  if (event.target.closest(\"[data-tab]\")) {\r\n    loginPopupAction(event);\r\n  }\r\n  if (event.target.closest(\"input + svg\")) {\r\n    passwordAction(event);\r\n  }\r\n  if (event.target.closest(\".buttons-info-book-page__download\")) {\r\n    downloadAction(event);\r\n  } else if (!event.target.closest(\".list-buttons-info-book-page\")) {\r\n    downloadHide();\r\n  }\r\n  if (!event.target.closest(\"#form-search-header\")) {\r\n    hideSearchResult();\r\n  }\r\n  if (event.target.closest(\"[data-tab-target]\")) {\r\n    tabAction(event);\r\n  }\r\n  if (event.target.closest(\".asaid-book-page__show-hide-button\")) {\r\n    asaidInnerAction(event);\r\n  }\r\n  if (event.target.closest(\"[data-read-blog-more]\")) {\r\n    readBlogMore(event);\r\n  }\r\n}\r\n//\r\n// ? Show header actions\r\nfunction showHeaderActions() {\r\n  const headerActions = document.querySelector(\".actions-header\");\r\n  headerActions?.classList.add(\"show\");\r\n  paddingRightAction();\r\n}\r\n//\r\n// ? Hide header actions\r\nfunction hideHeaderActions() {\r\n  const headerActions = document.querySelector(\".actions-header\");\r\n  headerActions?.classList.remove(\"show\");\r\n  paddingRightAction(false);\r\n}\r\n//\r\n// ? Padding right action\r\nfunction paddingRightAction(padding = true) {\r\n  const body = document.body;\r\n  const wrapper = document.querySelector(\".wrapper\");\r\n\r\n  const lockPaddingValue = padding ? `${window.innerWidth - wrapper.offsetWidth}px` : \"\";\r\n  body.style.setProperty(\"--padding\", lockPaddingValue);\r\n\r\n  body.classList.toggle(\"lock\", padding);\r\n}\r\n//\r\n// ? Add book to book box\r\nfunction addBookToBookBox(event) {\r\n  const addButton = event.target.closest(\".book-card__button\");\r\n  const bookBlock = addButton.closest(\".book-card\");\r\n  const bookCover = bookBlock?.querySelector(\"img\");\r\n  const bookBox = document.querySelector(\".actions-books__button_book-box\");\r\n\r\n  if (!addButton.classList.contains(\"adding\")) {\r\n    addButton.classList.add(\"adding\");\r\n\r\n    const bookCoverStyle = getComputedStyle(bookCover);\r\n    const bookCoverWidth = parseFloat(bookCoverStyle.width);\r\n    const bookCoverHieght = parseFloat(bookCoverStyle.height);\r\n    const bookCoverPosition = bookCover.getBoundingClientRect();\r\n    const bookCoverTop = bookCoverPosition.top;\r\n    const bookCoverLeft = bookCoverPosition.left;\r\n    const bookCoverSrc = bookCover.src;\r\n\r\n    let bookBoxStyle, bookBoxWidth, bookBoxHieght, bookBoxPosition, bookBoxTop, bookBoxLeft;\r\n\r\n    if (bookCover && bookBox) {\r\n      bookBoxStyle = getComputedStyle(bookBox);\r\n      bookBoxWidth = bookBoxStyle.width;\r\n      bookBoxHieght = bookBoxStyle.height;\r\n      bookBoxPosition = bookBox.getBoundingClientRect();\r\n      bookBoxTop = bookBoxPosition.top;\r\n      bookBoxLeft = bookBoxPosition.left;\r\n    }\r\n\r\n    const img = document.createElement(\"img\");\r\n    img.width = bookCoverWidth;\r\n    img.height = bookCoverHieght;\r\n    img.src = bookCoverSrc;\r\n    img.style.cssText = `\r\n      position: absolute;\r\n      top: ${bookCoverTop + scrollY}px;\r\n      left: ${bookCoverLeft}px;\r\n      z-index: 10;\r\n      objectt-fit: contain;\r\n      transition: 0.75s;\r\n    `;\r\n\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    if (wrapper) {\r\n      wrapper.style.position = \"relative\";\r\n      wrapper.append(img);\r\n    }\r\n\r\n    setTimeout(() => {\r\n      img.style.cssText = `\r\n        position: absolute;\r\n        top: ${matchMedia(\"(max-width: 992px)\").matches || scrollY > 290 || !bookBoxTop ?\r\n          scrollY : bookBoxTop + scrollY}px;\r\n        left: ${matchMedia(\"(max-width: 992px)\").matches || scrollY > 290 || !bookBoxTop ?\r\n          \"50%\" : bookBoxLeft + \"px\"};\r\n        z-index: 10;\r\n        width: ${bookBoxWidth && bookBoxWidth?.trim() !== \"auto\" ? bookBoxWidth : \"0px\"};\r\n        height: ${bookBoxHieght && bookBoxHieght?.trim() !== \"auto\" ? bookBoxHieght : \"0px\"};\r\n        opacity: 0;\r\n        objectt-fit: contain;\r\n        transition: 0.75s;\r\n      `;\r\n    }, 250);\r\n\r\n    img.addEventListener(\"transitionend\", () => {\r\n      img.remove();\r\n\r\n      const changedText = addButton.dataset.changedText;\r\n      if (changedText) addButton.innerText = changedText;\r\n      addButton.classList.add(\"added\");\r\n      addButton.classList.remove(\"adding\");\r\n      addButton.blur();\r\n      if (wrapper) wrapper.style.position = \"\";\r\n    }, { once: true });\r\n  }\r\n}\r\n//\r\nfunction spoilerAction(event) {\r\n  const button = event.target.closest(\".reviews-book-page__button\");\r\n  const spoilerBlock = button.closest(\".reviews-book-page__item\");\r\n  const spoiler = spoilerBlock?.querySelector(\".reviews-book-page__text_hidden\");\r\n\r\n  if (spoiler && !spoiler.classList.contains(\"slide\")) {\r\n    slideToggle(spoiler);\r\n\r\n    const hiddenText = button.dataset.hiddenText;\r\n    const showText = button.dataset.showText;\r\n\r\n    if (hiddenText && showText) {\r\n      setTimeout(() => {\r\n        button.innerText = spoiler.hidden ? hiddenText : showText;\r\n      }, 500);\r\n    }\r\n  }\r\n}\r\n//\r\nfunction removeBookCard(event) {\r\n  const button = event.target.closest(\".book-card__remove\");\r\n  const bookCard = button.closest(\".book-card\");\r\n  bookCard?.classList.add(\"removing\");\r\n  bookCard?.addEventListener(\"transitionend\", () => {\r\n    bookCard.remove();\r\n    setAsideSliderHeight();\r\n  })\r\n}\r\n//\r\nfunction popupShow(event) {\r\n  const button = event.target.closest(\"[data-popup-target]\");\r\n  const buttonData = button.dataset.popupTarget;\r\n  const popup = document.getElementById(buttonData);\r\n\r\n  if (popup) {\r\n    popup.classList.add(\"show\");\r\n    paddingRightAction();\r\n  }\r\n}\r\n//\r\nfunction popupHide() {\r\n  const showedPopup = document.querySelector(\"[data-popup].show\");\r\n  if (showedPopup) {\r\n    showedPopup.classList.remove(\"show\");\r\n    paddingRightAction(false);\r\n    document.body.removeAttribute(\"data-test\");\r\n  }\r\n}\r\n//\r\nfunction loginPopupAction(event) {\r\n  const button = event.target.closest(\"[data-tab]\");\r\n  const buttonData = button.dataset.tab;\r\n  const tabsBlock = button.closest(\"[data-tabs]\");\r\n  const formsBlock = tabsBlock?.querySelector(\".login__forms\");\r\n\r\n  formsBlock.style.setProperty(\"--left\", buttonData === \"signin\" ? \"-100%\" : 0);\r\n  button.blur();\r\n\r\n  tabsBlock.querySelectorAll(\"[data-tab]\").forEach(tab => {\r\n    tab.classList.toggle(\"active\", tab === button);\r\n  })\r\n}\r\n//\r\nfunction passwordAction(event) {\r\n  const button = event.target.closest(\"input + svg\");\r\n  const input = button.previousElementSibling;\r\n\r\n  if (input && input.tagName === \"INPUT\") {\r\n    const inputType = input.type;\r\n    input.type = inputType === \"password\" ? \"text\" : \"password\";\r\n  }\r\n}\r\n//\r\nfunction downloadAction(event) {\r\n  const button = event.target.closest(\".buttons-info-book-page__download\");\r\n  const downloadList = button.nextElementSibling;\r\n\r\n  if (downloadList && !downloadList.classList.contains(\"slide\")) {\r\n    slideToggle(downloadList);\r\n  }\r\n}\r\n//\r\nfunction downloadHide() {\r\n  const downloadList = document.querySelector(\".list-buttons-info-book-page\");\r\n  const isHidden = downloadList?.hasAttribute(\"hidden\");\r\n  if (downloadList && !isHidden && !downloadList.classList.contains(\"slide\")) {\r\n    slideUp(downloadList);\r\n  }\r\n}\r\n//\r\nfunction showSearchResult(event) {\r\n  const input = event.target;\r\n  const inputValue = input.value;\r\n  if (inputValue) {\r\n    const searchResultBlock = input.nextElementSibling;\r\n    searchResultBlock?.classList.add(\"show\");\r\n  }\r\n}\r\n//\r\nfunction hideSearchResult() {\r\n  const searchResultBlock = document.querySelector(\".search-result-form-actions-header\");\r\n  searchResultBlock?.classList.remove(\"show\");\r\n}\r\n//\r\nfunction sidebarAction(isHidden) {\r\n  const button = document.getElementById(\"hideMenu\");\r\n  const container = document.querySelector(\".main-book-page__container\");\r\n\r\n  button.classList.toggle(\"active\", isHidden);\r\n\r\n  const readerWidthRange = forms?.[\"reader-settings\"]?.[\"change-reader-width\"];\r\n  const readerWidthRangeValue = +readerWidthRange?.value;\r\n  button.classList.toggle(\"self\",\r\n    (readerWidthRangeValue < 75 && button.classList.contains(\"active\")) ||\r\n    (readerWidthRangeValue > 75 && !button.classList.contains(\"active\")));\r\n\r\n  container?.classList.toggle(\"full\", isHidden);\r\n  container?.classList.contains(\"full\") ?\r\n    button.innerText = button.dataset.hideText :\r\n    button.innerText = button.dataset.showText;\r\n\r\n  container?.classList.contains(\"full\") ?\r\n    localStorage.setItem(\"isHideSidebar\", \"hidden\") :\r\n    localStorage.removeItem(\"isHideSidebar\");\r\n}\r\n//\r\nfunction tabAction(event) {\r\n  const targetButton = event.target.closest(\"[data-tab-target]\");\r\n  const tabsBlock = targetButton.closest(\"[data-tabs]\");\r\n  const tabContainer = tabsBlock?.querySelector(\"[data-tab-container]\");\r\n  const tabs = tabContainer?.querySelectorAll(\"[data-tab-id]\");\r\n  const buttonData = targetButton.dataset.tabTarget;\r\n  const buttons = tabsBlock?.querySelectorAll(\"[data-tab-target]\");\r\n\r\n  buttons?.forEach(button => {\r\n    button.classList.toggle(\"active\", button === targetButton);\r\n  });\r\n\r\n  tabs?.forEach(tab => {\r\n    tab.classList.toggle(\"active\", buttonData === tab.dataset.tabId);\r\n  });\r\n\r\n  const activeTab = tabContainer?.querySelector(\"[data-tab-id].active\");\r\n\r\n  if (tabs.length && activeTab) {\r\n    const activeTabIndex = Array.from(tabs).findIndex(tab => tab === activeTab);\r\n\r\n    tabContainer.style.setProperty(\"--left\", `${activeTabIndex * (-100)}%`);\r\n  }\r\n}\r\n//\r\nfunction asaidInnerAction(event) {\r\n  const button = event.target.closest(\".asaid-book-page__show-hide-button\");\r\n  const asaidInner = button.previousElementSibling;\r\n  if (asaidInner && !asaidInner?.classList.contains(\"slide\")) {\r\n    slideToggle(asaidInner);\r\n\r\n    setTimeout(() => {\r\n      button.innerText = asaidInner.hasAttribute(\"hidden\") ?\r\n        button.dataset.showText :\r\n        button.dataset.hideText;\r\n    }, 500);\r\n  }\r\n}\r\n//\r\n/** @param {MouseEvent} event */\r\nfunction readBlogMore(event) {\r\n  /** @type {HTMLElement} */\r\n  const target = event.target;\r\n  const button = target.closest(\"[data-read-blog-more]\");\r\n  const inner = button.closest(\".blog-block__inner\");\r\n  const hiddenBlock = inner?.querySelector(\".blog-block__hidden\");\r\n\r\n  if (hiddenBlock) {\r\n    slideDown(hiddenBlock);\r\n    button.remove();\r\n  }\r\n}\r\n//\r\n// ? Keydown\r\nfunction keydown(event) {\r\n  if (event.code === \"Escape\") {\r\n    hideHeaderActions();\r\n    popupHide();\r\n    downloadHide();\r\n  }\r\n}\r\n//\r\n// ? Max width 992px event\r\nfunction maxWidth992pxEvent(event) {\r\n  if (!event.matches) {\r\n    if (!scrollY) {\r\n      hideHeaderActions();\r\n    }\r\n  }\r\n}\r\n//\r\n// ? Max width 480px event\r\nfunction maxWidth480pxEvent(event) {\r\n  const isInputChecked = forms?.[\"form-actions-header\"]?.[\"form-actions-header-annotation\"]?.checked;\r\n  const booksBlock = document.querySelectorAll(\".books\");\r\n  if (event.matches) {\r\n    booksBlock?.forEach(block => {\r\n      isInputChecked ?\r\n        block?.style.setProperty(\"--books-grid\", \"250px\") :\r\n        block?.style.removeProperty(\"--books-grid\");\r\n    });\r\n  } else {\r\n    booksBlock?.forEach(block => {\r\n      isInputChecked ?\r\n        block?.style.setProperty(\"--books-grid\", \"375px\") :\r\n        block?.style.removeProperty(\"--books-grid\");\r\n    });\r\n  }\r\n}\r\n//\r\n// ? Input\r\nfunction input(event) {\r\n  const input = event.target;\r\n  const inputName = input.name;\r\n  const isInputChecked = input.checked;\r\n\r\n  const form = input.closest(\".form-actions-header\");\r\n  if (inputName === \"form-search-header-search\") {\r\n    const inputValue = input.value;\r\n    const searchResult = input.nextElementSibling;\r\n\r\n    searchResult?.classList.toggle(\"show\", inputValue);\r\n  }\r\n\r\n  if (inputName === \"form-actions-header-price\") {\r\n    const bookPrices = document.querySelectorAll(\".book-card__prices\");\r\n\r\n    bookPrices?.forEach(price => {\r\n      price.hidden = !isInputChecked;\r\n    });\r\n\r\n    isInputChecked ? localStorage.setItem(\"price\", \"checked\") : localStorage.removeItem(\"price\");\r\n  }\r\n\r\n  if (inputName === \"form-actions-header-annotation\") {\r\n    const bookAnnotations = document.querySelectorAll(\".book-card__text\");\r\n\r\n    if (bookAnnotations.length) {\r\n      const booksBlock = document.querySelectorAll(\".books\");\r\n\r\n      bookAnnotations.forEach(annotation => {\r\n        annotation.hidden = !isInputChecked;\r\n      });\r\n\r\n      booksBlock?.forEach(block => {\r\n        block.classList.toggle(\"annotations\", isInputChecked);\r\n\r\n        isInputChecked ?\r\n          block?.style.setProperty(\"--books-grid\", MAX_WIDTH_480PX.matches ? \"250px\" : \"375px\") :\r\n          block?.style.removeProperty(\"--books-grid\");\r\n      });\r\n    }\r\n\r\n    isInputChecked ? localStorage.setItem(\"annotations\", \"checked\") : localStorage.removeItem(\"annotations\");\r\n  }\r\n\r\n  if (inputName === \"form-actions-header-free\") {\r\n    const bookCard = document.querySelectorAll(\".book-card\");\r\n\r\n    bookCard?.forEach(card => {\r\n      const price = card.querySelector(\".book-card__prices\");\r\n      card.hidden = isInputChecked && !!price;\r\n    });\r\n\r\n    const discountCheckbox = form?.[\"form-actions-header-discount\"];\r\n    if (discountCheckbox) discountCheckbox.checked = false;\r\n\r\n    const priceCheckbox = form?.[\"form-actions-header-price\"];\r\n    priceCheckbox?.classList.toggle(\"disabled\", isInputChecked);\r\n\r\n    isInputChecked ? localStorage.setItem(\"free\", \"checked\") : localStorage.removeItem(\"free\");\r\n    if (isInputChecked) localStorage.removeItem(\"discount\");\r\n  }\r\n\r\n  if (inputName === \"form-actions-header-discount\") {\r\n    const bookCard = document.querySelectorAll(\".book-card\");\r\n\r\n    bookCard?.forEach(card => {\r\n      const oldPrice = card.querySelector(\".book-card__old-price\");\r\n      card.hidden = isInputChecked && !oldPrice;\r\n    });\r\n\r\n    const freeCheckbox = form?.[\"form-actions-header-free\"];\r\n    if (freeCheckbox) freeCheckbox.checked = false;\r\n\r\n    const priceCheckbox = form?.[\"form-actions-header-price\"];\r\n    if (isInputChecked) priceCheckbox?.classList.remove(\"disabled\");\r\n\r\n    isInputChecked ? localStorage.setItem(\"discount\", \"checked\") : localStorage.removeItem(\"discount\");\r\n    if (isInputChecked) localStorage.removeItem(\"free\");\r\n  }\r\n\r\n  if (inputName === \"form-actions-header-author\") {\r\n    const bookAuthors = document.querySelectorAll(\".book-card__author\");\r\n\r\n    bookAuthors?.forEach(author => {\r\n      author.hidden = !isInputChecked;\r\n    });\r\n\r\n    isInputChecked ? localStorage.setItem(\"author\", \"checked\") : localStorage.removeItem(\"author\");\r\n  }\r\n\r\n  if (inputName === \"form-actions-header-bookname\") {\r\n    const booknames = document.querySelectorAll(\".book-card__bookname\");\r\n\r\n    booknames?.forEach(bookname => {\r\n      bookname.hidden = !isInputChecked;\r\n    });\r\n\r\n    isInputChecked ? localStorage.setItem(\"bookname\", \"checked\") : localStorage.removeItem(\"bookname\");\r\n  }\r\n\r\n  setAsideSliderHeight();\r\n}\r\n\r\nfunction focus(event) {\r\n  if (event.target.name === \"form-search-header-search\") {\r\n    showSearchResult(event);\r\n  }\r\n}\r\n//\r\n// ? Header observer action\r\nfunction headerObserverAction(action = \"add\") {\r\n  const headerWrapper = document.querySelector(\".header__wrapper\");\r\n\r\n  headerWrapper?.classList[action](\"scrolled\");\r\n}\r\n//\r\n// ? Set aside slider height\r\nfunction setAsideSliderHeight() {\r\n  const baseBlock = document.querySelector(\".base\");\r\n  const booksBlock = baseBlock?.querySelector(\".books\");\r\n  const asideBlock = baseBlock?.querySelector(\".aside\");\r\n  const asideSlider = asideBlock?.querySelector(\".slider-aside\");\r\n  if (asideSlider && booksBlock) {\r\n    if (MAX_WIDTH_992PX.matches) {\r\n      asideSlider.style.removeProperty(\"--aside-slider-height\");\r\n    } else {\r\n      const booksBlockHeight = getComputedStyle(booksBlock).height;\r\n      asideSlider.style.setProperty(\"--aside-slider-height\", booksBlockHeight);\r\n    }\r\n  }\r\n}\r\n\r\nfunction spoller(duration) {\r\n  const spollers = document.querySelectorAll(\"[data-spollers]\");\r\n\r\n  const spollersRegular = Array.from(spollers).filter(item => {\r\n    return !item.dataset.spollers.split(\",\")[0];\r\n  });\r\n  if (spollersRegular.length) {\r\n    initSpollers(spollersRegular);\r\n  }\r\n  const spollersMedia = Array.from(spollers).filter(item => {\r\n    return item.dataset.spollers.split(\",\")[0];\r\n  });\r\n  if (spollersMedia.length) {\r\n    const breakpointsArray = [];\r\n    spollersMedia.forEach(item => {\r\n      const params = item.dataset.spollers;\r\n      const breakpoint = {};\r\n      const paramsArray = params.split(\",\");\r\n      breakpoint.value = paramsArray[0];\r\n      breakpoint.type = paramsArray[1] ? paramsArray[1].trim() : \"max\";\r\n      breakpoint.item = item;\r\n      breakpointsArray.push(breakpoint);\r\n    });\r\n    let mediaQueries = breakpointsArray.map(item => {\r\n      return `(${item.type}-width: ${item.value}px),${item.value},${item.type}`;\r\n    });\r\n    mediaQueries = mediaQueries.filter((item, index, self) => {\r\n      return self.indexOf(item) === index;\r\n    });\r\n    mediaQueries.forEach(breakpoint => {\r\n      const paramsArray = breakpoint.split(\",\");\r\n      const mediaBreakpoint = paramsArray[1];\r\n      const mediaType = paramsArray[2];\r\n      const matchMedia = window.matchMedia(paramsArray[0]);\r\n      const spollersArray = breakpointsArray.filter(item => {\r\n        if (item.value === mediaBreakpoint && item.type === mediaType) {\r\n          return true;\r\n        }\r\n      });\r\n      matchMedia.addEventListener(\"change\", () => {\r\n        initSpollers(spollersArray, matchMedia);\r\n      });\r\n      initSpollers(spollersArray, matchMedia);\r\n    });\r\n  }\r\n  function initSpollers(spollersArray, matchMedia = false) {\r\n    spollersArray.forEach(spollersBlock => {\r\n      spollersBlock = matchMedia ? spollersBlock.item : spollersBlock;\r\n      if (matchMedia.matches || !matchMedia) {\r\n        spollersBlock.classList.add(\"init\");\r\n        initSpollerBody(spollersBlock);\r\n        spollersBlock.addEventListener(\"click\", setSpollerAction);\r\n      } else {\r\n        spollersBlock.classList.remove(\"init\");\r\n        initSpollerBody(spollersBlock, false);\r\n        spollersBlock.removeEventListener(\"click\", setSpollerAction);\r\n      }\r\n    });\r\n  }\r\n  function initSpollerBody(spollersBlock, hideSpollerBody = true) {\r\n    const spollerTitles = spollersBlock.querySelectorAll(\"[data-spoller]\");\r\n    if (spollerTitles.length) {\r\n      spollerTitles.forEach(spollerTitle => {\r\n        if (hideSpollerBody) {\r\n          if (!spollerTitle.classList.contains(\"active\")) {\r\n            spollerTitle.nextElementSibling.hidden = true;\r\n          }\r\n        } else {\r\n          spollerTitle.nextElementSibling.hidden = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  function setSpollerAction(event) {\r\n    const el = event.target;\r\n    if (el.hasAttribute(\"data-spoller\") || el.closest(\"[data-spoller]\")) {\r\n      const spollerTitle = el.hasAttribute(\"data-spoller\") ? el : el.closest(\"[data-spoller]\");\r\n      const spollersBlock = spollerTitle.closest(\"[data-spollers]\");\r\n      const oneSpoller = spollersBlock.hasAttribute(\"data-one-spoller\") ? true : false;\r\n      if (!spollersBlock.querySelectorAll(\".slide\").length) {\r\n        if (oneSpoller && !spollerTitle.classList.contains(\"active\")) {\r\n          hideSpollersBody(spollersBlock);\r\n        }\r\n        spollerTitle.classList.toggle(\"active\");\r\n        slideToggle(spollerTitle.nextElementSibling, duration);\r\n      }\r\n      event.preventDefault();\r\n    }\r\n  }\r\n  function hideSpollersBody(spollersBlock) {\r\n    const spollerActiveTitle = spollersBlock.querySelector(\"[data-spoller].active\");\r\n    if (spollerActiveTitle) {\r\n      spollerActiveTitle.classList.remove(\"active\");\r\n      slideUp(spollerActiveTitle.nextElementSibling, duration);\r\n    }\r\n  }\r\n}\r\n\r\nfunction slideUp(target, duration = 500) {\r\n  if (!target.classList.contains(\"slide\")) {\r\n    target.classList.add(\"slide\");\r\n    target.style.transitionProperty = \"height, margin, padding\";\r\n    target.style.transitionDuration = `${duration}ms`;\r\n    target.style.height = `${target.offsetHeight}px`;\r\n    target.offsetHeight;\r\n    target.style.overflow = \"hidden\";\r\n    target.style.height = 0;\r\n    target.style.paddingTop = 0;\r\n    target.style.paddingBottom = 0;\r\n    target.style.marginTop = 0;\r\n    target.style.marginBottom = 0;\r\n    window.setTimeout(() => {\r\n      target.hidden = true;\r\n      target.style.removeProperty(\"height\");\r\n      target.style.removeProperty(\"padding-top\");\r\n      target.style.removeProperty(\"padding-bottom\");\r\n      target.style.removeProperty(\"margin-top\");\r\n      target.style.removeProperty(\"margin-bottom\");\r\n      target.style.removeProperty(\"overflow\");\r\n      target.style.removeProperty(\"transition-duration\");\r\n      target.style.removeProperty(\"transition-property\");\r\n      target.classList.remove(\"slide\");\r\n    }, duration);\r\n  }\r\n}\r\n\r\nfunction slideDown(target, duration = 500) {\r\n  if (!target.classList.contains(\"slide\")) {\r\n    target.classList.add(\"slide\");\r\n    if (target.hidden) {\r\n      target.hidden = false;\r\n    }\r\n    let height = target.offsetHeight;\r\n    target.style.overflow = \"hidden\";\r\n    target.style.height = 0;\r\n    target.style.paddingTop = 0;\r\n    target.style.paddingBottom = 0;\r\n    target.style.marginTop = 0;\r\n    target.style.marginBottom = 0;\r\n    target.offsetHeight;\r\n    target.style.transitionProperty = \"height, margin, padding\";\r\n    target.style.transitionDuration = `${duration}ms`;\r\n    target.style.height = `${height}px`;\r\n    target.style.removeProperty(\"padding-top\");\r\n    target.style.removeProperty(\"padding-bottom\");\r\n    target.style.removeProperty(\"margin-top\");\r\n    target.style.removeProperty(\"margin-bottom\");\r\n    window.setTimeout(() => {\r\n      target.style.removeProperty(\"height\");\r\n      target.style.removeProperty(\"overflow\");\r\n      target.style.removeProperty(\"transition-duration\");\r\n      target.style.removeProperty(\"transition-property\");\r\n      target.classList.remove(\"slide\");\r\n    }, duration);\r\n  }\r\n}\r\n\r\nfunction slideToggle(target, duration = 500) {\r\n  if (target.hidden) {\r\n    return slideDown(target, duration);\r\n  } else {\r\n    return slideUp(target, duration);\r\n  }\r\n}\r\n\r\nclass DynamicAdapt {\r\n  constructor(type) {\r\n    this.type = type;\r\n  }\r\n\r\n  init() {\r\n    // массив объектов\r\n    this.оbjects = [];\r\n    this.daClassname = '_dynamic_adapt_';\r\n    // массив DOM-элементов\r\n    this.nodes = [...document.querySelectorAll('[data-da]')];\r\n\r\n    // наполнение оbjects объктами\r\n    this.nodes.forEach((node) => {\r\n      const data = node.dataset.da.trim();\r\n      const dataArray = data.split(',');\r\n      const оbject = {};\r\n      оbject.element = node;\r\n      оbject.parent = node.parentNode;\r\n      оbject.destination = document.querySelector(`${dataArray[0].trim()}`);\r\n      оbject.breakpoint = dataArray[1] ? dataArray[1].trim() : '767';\r\n      оbject.place = dataArray[2] ? dataArray[2].trim() : 'last';\r\n      оbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n      this.оbjects.push(оbject);\r\n    });\r\n\r\n    this.arraySort(this.оbjects);\r\n\r\n    // массив уникальных медиа-запросов\r\n    this.mediaQueries = this.оbjects\r\n      .map(({\r\n        breakpoint\r\n      }) => `(${this.type}-width: ${breakpoint}px),${breakpoint}`)\r\n      .filter((item, index, self) => self.indexOf(item) === index);\r\n\r\n    // навешивание слушателя на медиа-запрос\r\n    // и вызов обработчика при первом запуске\r\n    this.mediaQueries.forEach((media) => {\r\n      const mediaSplit = media.split(',');\r\n      const matchMedia = window.matchMedia(mediaSplit[0]);\r\n      const mediaBreakpoint = mediaSplit[1];\r\n\r\n      // массив объектов с подходящим брейкпоинтом\r\n      const оbjectsFilter = this.оbjects.filter(\r\n        ({\r\n          breakpoint\r\n        }) => breakpoint === mediaBreakpoint\r\n      );\r\n      matchMedia.addEventListener('change', () => {\r\n        this.mediaHandler(matchMedia, оbjectsFilter);\r\n      });\r\n      this.mediaHandler(matchMedia, оbjectsFilter);\r\n    });\r\n  }\r\n\r\n  // Основная функция\r\n  mediaHandler(matchMedia, оbjects) {\r\n    if (matchMedia.matches) {\r\n      оbjects.forEach((оbject) => {\r\n        оbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n        this.moveTo(оbject.place, оbject.element, оbject.destination);\r\n      });\r\n    } else {\r\n      оbjects.forEach(\r\n        ({ parent, element, index }) => {\r\n          if (element.classList.contains(this.daClassname)) {\r\n            this.moveBack(parent, element, index);\r\n          }\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // Функция перемещения\r\n  moveTo(place, element, destination) {\r\n    element.classList.add(this.daClassname);\r\n    if (place === 'last' || place >= destination.children.length) {\r\n      destination.append(element);\r\n      return;\r\n    }\r\n    if (place === 'first') {\r\n      destination.prepend(element);\r\n      return;\r\n    }\r\n    destination.children[place].before(element);\r\n  }\r\n\r\n  // Функция возврата\r\n  moveBack(parent, element, index) {\r\n    element.classList.remove(this.daClassname);\r\n    if (parent.children[index] !== undefined) {\r\n      parent.children[index].before(element);\r\n    } else {\r\n      parent.append(element);\r\n    }\r\n  }\r\n\r\n  // Функция получения индекса внутри родителя\r\n  indexInParent(parent, element) {\r\n    return [...parent.children].indexOf(element);\r\n  }\r\n\r\n  // Функция сортировки массива по breakpoint и place\r\n  // по возрастанию для this.type = min\r\n  // по убыванию для this.type = max\r\n  arraySort(arr) {\r\n    if (this.type === 'min') {\r\n      arr.sort((a, b) => {\r\n        if (a.breakpoint === b.breakpoint) {\r\n          if (a.place === b.place) {\r\n            return 0;\r\n          }\r\n          if (a.place === 'first' || b.place === 'last') {\r\n            return -1;\r\n          }\r\n          if (a.place === 'last' || b.place === 'first') {\r\n            return 1;\r\n          }\r\n          return a.place - b.place;\r\n        }\r\n        return a.breakpoint - b.breakpoint;\r\n      });\r\n    } else {\r\n      arr.sort((a, b) => {\r\n        if (a.breakpoint === b.breakpoint) {\r\n          if (a.place === b.place) {\r\n            return 0;\r\n          }\r\n          if (a.place === 'first' || b.place === 'last') {\r\n            return 1;\r\n          }\r\n          if (a.place === 'last' || b.place === 'first') {\r\n            return -1;\r\n          }\r\n          return b.place - a.place;\r\n        }\r\n        return b.breakpoint - a.breakpoint;\r\n      });\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nconst da = new DynamicAdapt(\"max\");\r\nda.init();\r\n\r\nspoller(300);\r\n\r\nfunction messageAction({\r\n  block = undefined,\r\n  item = undefined,\r\n  message = undefined,\r\n  duration = 2000,\r\n}) {\r\n  const body = document.body;\r\n  const messageBlock = document.querySelector(\".message-block\");\r\n\r\n  if (!messageBlock) {\r\n    const messageBlock = document.createElement(\"div\");\r\n    messageBlock.classList.add(\"message-block\");\r\n    if (block) messageBlock.classList.add(block);\r\n    body.append(messageBlock);\r\n  }\r\n\r\n  createMessageItem(item, message, duration);\r\n}\r\n\r\nfunction createMessageItem(item, message, duration) {\r\n  const messageBlock = document.querySelector(\".message-block\");\r\n\r\n  const messageItem = document.createElement(\"div\");\r\n  messageItem.classList.add(\"message-block__item\");\r\n  if (item) messageItem.classList.add(item);\r\n  messageItem.innerHTML = message ? message : \"<span>Message!</span>\";\r\n  messageBlock.append(messageItem);\r\n\r\n  setTimeout(() => {\r\n    messageItem.classList.add(\"show\");\r\n\r\n    removeMessageItem(messageItem, duration);\r\n  });\r\n}\r\n\r\nfunction removeMessageItem(item, duration) {\r\n  const messageBlock = document.querySelector(\".message-block\");\r\n  setTimeout(() => {\r\n    item.classList.add(\"hide\");\r\n\r\n    item.addEventListener(\"transitionend\", () => {\r\n      item.remove();\r\n\r\n      if (!messageBlock.querySelector(\".message-block__item\")) messageBlock.remove();\r\n    }, { once: true });\r\n  }, duration);\r\n}\r\n\n\n//# sourceURL=webpack://knizhnyi-uiutnyi/./src/js/script.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/js/script.js"]();
/******/ 	
/******/ })()
;